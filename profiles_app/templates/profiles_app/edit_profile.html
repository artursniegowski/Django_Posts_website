{% extends 'base_page_templates/base.html' %}
{% load sorl_thumbnail %}

{% block title %}Edit profile{% endblock  %}

{% block main_content %}

    {% include  'feed_app/includes/messages.html' %}

    <!-- component -->
    <div class="max-w-2xl mx-auto">
        <h1 class="capitalize font-serif text-3xl text-center text-black my-10 pb-5">
            Edit your profile
        </h1>
        <form action="" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {% comment %} errors for each form as a whole {% endcomment %}
            {{ user_form.non_field_errors }}
            {{ profile_form.non_field_errors }}
            <div class="z-0 mb-6 w-full flex justify-center">
                {% if user.profile.image %}
                    {% thumbnail user.profile.image "100x100" crop="center" as im %}
                        <img class="rounded-full border-solid border-white border-2 -mt-3" src="{{ im.url }}" alt="imag-avatar">		
                    {% endthumbnail %}
                {% else %}
                    <img class="rounded-full border-solid border-white border-2 -mt-3"
                    width="100"
                    height="100" 
                    src="https://st3.depositphotos.com/23594922/31822/v/1600/depositphotos_318221368-stock-illustration-missing-picture-page-for-website.jpg" 
                    alt="imag-avatar">
                {% endif %}	
            </div>
            <div class="z-0 mb-6 w-full flex justify-center">
                {{ profile_form.image.errors }}
                {% comment %} {{ user_form.image.label_tag }} {% endcomment %}
                {% comment %} <label for="{{ profile_form.image.id_for_label }}">
                    Change your profile picture
                </label> {% endcomment %}
                <input type="{{ profile_form.image.field.widget.input_type}}" 
                name="{{ profile_form.image.name }}" 
                id="{{ profile_form.image.id_for_label }}"
                class="block text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400">
                {% comment %} {{ profile_form.image }} {% endcomment %}
            </div>
       
            <div class="relative z-0 mb-6 w-full group">
                {{ user_form.username.errors }}
                {{ user_form.username }}
                <label for="{{ user_form.username.id_for_label }}"
                    class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">
                    Username
                </label>
            </div>
            <div class="relative z-0 mb-6 w-full group">
                {{ user_form.email.errors }}
                {{ user_form.email }}
                <label for="{{ user_form.username.id_for_label }}"
                    class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">
                    Email address
                </label>
            </div>
            <div class="grid xl:grid-cols-2 xl:gap-6">
                <div class="relative z-0 mb-6 w-full group">
                    {{ user_form.first_name.errors }}
                    {{ user_form.first_name }}
                    <label for="{{ user_form.username.id_for_label }}"
                        class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">
                        First name
                    </label>
                </div>
                <div class="relative z-0 mb-6 w-full group">
                    {{ user_form.last_name.errors }}
                    {{ user_form.last_name }}
                    <label for="{{ user_form.username.id_for_label }}"
                        class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">
                        Last name
                    </label>
                </div>
            </div>
            <button type="submit"
                class="text-white bg-blue-500 hover:bg-blue-600 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                Update
            </button>
            {% comment %} back homepage {% endcomment %}
            <a href="{% url 'feed_app:index' %}">
                <button type="button"
                    class="text-white bg-red-500 hover:bg-red-600 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                    Cancel
                </button>
            </a>
        </form>

        <div class="relative flex py-5 items-center">
            <div class="flex-grow border-t border-gray-900"></div>
        </div>

        <br>
        <div>
            {% comment %} from allauth {% endcomment %}
            <a href="{% url 'profiles_app:custom_change_password' %}">
                <button type="button" class="py-3 px-4 inline-flex justify-center items-center gap-2 rounded-md border border-transparent font-semibold bg-blue-500 text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all text-sm dark:focus:ring-offset-gray-800">
                    Change password
                </button>
            </a>
        </div>
        <br>


    </div>

{% endblock  %}





